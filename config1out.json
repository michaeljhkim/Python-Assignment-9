{"openapi": "3.0.3", "info": {"title": "Project", "description": "Description of project that cannot be named.\nLast update: 2021-04-08\n", "version": "1.0.0"}, "servers": [{"url": "http://localhost:6060", "description": "Direct access"}], "tags": [{"name": "Identification"}, {"name": "Chat"}, {"name": "Link"}, {"name": "Notification"}, {"name": "User"}, {"name": "Websocket"}], "paths": {"/api/v1/ws/auth": {"get": {"summary": "Get websocket token", "description": "Returns a temporary authentication token for connecting to the websocket feeds. The token is valid for a specific challenge. The token issued is only valid for 15 seconds.", "tags": ["Websocket"], "parameters": [{"name": "challenge", "in": "query", "description": "UUID of challenge", "required": true, "schema": {"type": "string"}}], "responses": {"200": {"description": "Websocket token", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/authHandlerResp"}, "example": {"data": "Successfully generated websocket authorization token, valid for 15s.", "success": true, "token": "iJV8ob8oqN8a929Vhm5OX4abgnafWPsy3YHmqx3LPms="}}}}, "400": {"$ref": "#/components/responses/BadRequest"}, "401": {"$ref": "#/components/responses/Unauthorized"}, "500": {"$ref": "#/components/responses/InternalServerError"}}}}, "/id/auth": {"post": {"summary": "Generate user authentication token", "description": "Generates a URL containing a temporary access token for authenticating with the challenge mapping application. User browser must be redirected to this URL to perform authentication. URL is valid for 30 seconds. Requires `Authorization` header sent with request.", "tags": ["Identification"], "parameters": [{"name": "username", "in": "query", "description": "Username to authenticate", "required": true, "schema": {"type": "string"}}, {"name": "challenge", "in": "query", "description": "UUID of challenge to redirect user to", "required": false, "schema": {"type": "string"}}], "responses": {"200": {"description": "Successful token generation", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/authHandlerResp"}, "example": {"data": "Generated authentication URL for test@basadur.com, expires in 30s.", "success": true, "url": "https://challenge.basadurprofile.com/id/login?token=-j1j0tTWiwsGfta7L6LgqgdN-Rj8mgFYg-6YilNOlHo="}}}}, "400": {"$ref": "#/components/responses/BadRequest"}, "401": {"$ref": "#/components/responses/Unauthorized"}, "500": {"$ref": "#/components/responses/InternalServerError"}}}}}, "components": {"schemas": {"Auth": {"type": "object", "required": ["UUID", "Username", "Email", "Name", "Activated", "LastActivity", "LastSync", "SystemAdmin", "GlobalCofacilitator"], "properties": {"Activated": {"type": "boolean"}, "Email": {"type": "string"}, "GlobalCofacilitator": {"type": "boolean"}, "LastActivity": {"$ref": "#/components/schemas/Time"}, "LastSync": {"$ref": "#/components/schemas/Time"}, "Name": {"type": "string"}, "SystemAdmin": {"type": "boolean"}, "UUID": {"type": "string"}, "Username": {"type": "string"}}}}, "responses": {"BadRequest": {"description": "Bad request format", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/GeneralResponse"}, "example": {"data": "Invalid request.", "success": false}}}}, "InternalServerError": {"description": "Unexpected error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/GeneralResponse"}, "example": {"data": "Internal error has occurred. Contact system administrator.", "success": false}}}}, "Success": {"description": "Successful request", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/GeneralResponse"}, "example": {"data": "Successful request.", "success": true}}}}, "Unauthorized": {"description": "Invalid permissions or invalid Authorization header", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/GeneralResponse"}, "example": {"data": "Not authorized to perform action.", "success": false}}}}, "WebsocketError": {"description": "Failed to upgrade request to Websocket connection", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/GeneralResponse"}, "example": {"data": "Failed to upgrade request to WebSocket.", "success": false}}}}}}}